# Makefile for JADE project - lib directory

# The following targets are not file names
.PHONY: all clean

AR = jar
ARFLAGS = cvf

all:
	@echo Making library ...
	cd $(CLSDIR); \
	$(AR) $(ARFLAGS) $(LIBDIR)/$(LIBAPPLETNAME) jade\applet\*.class jade\gui\*.class jade\core\IIOPFormatException*.class jade\lang\acl\ACLParser.class jade\lang\acl\ACLMessage.class jade\lang\acl\ACLParserConstants.class jade\lang\acl\ACLParserTokenManager.class jade\lang\acl\ASCII_CharStream.class jade\lang\acl\ISO8601.class jade\lang\acl\ParseException.class jade\lang\acl\Token.class jade\lang\acl\TokenMgrError.class jade\core\AgentGroup.class jade\domain\AgentManagementOntology*.class jade\domain\FIPAException.class jade\domain\AgentManagementParser.class jade\domain\AgentManagementParserConstants.class jade\domain\AgentManagementParserTokenManager.class jade\domain\ASCII_CharStream.class jade\domain\ParseException.class jade\domain\Token.class jade\domain\TokenMgrError.class jade\domain\*Exception.class \
	rm -rf jade/applet; \
	$(AR) $(ARFLAGS) $(LIBDIR)/$(LIBTOOLSNAME) jade/tools; \
	rm -rf jade/tools; \
	$(AR) $(ARFLAGS) $(LIBDIR)/$(LIBNAME) *.class jade; \
	rm -rf jade *.class; \
	$(AR) $(ARFLAGS) $(LIBDIR)/$(LIBBASE64NAME) starlight; \
	rm -rf starlight; \
	cd $(LIBDIR)

clean:
	rm -f $(LIBDIR)/$(LIBTOOLSNAME)
	rm -f $(LIBDIR)/$(LIBNAME)
	rm -f $(LIBDIR)/$(LIBBASE64NAME)
	rm -f `find . -name '*~' -print`
	rm -f `find . -name '#*#' -print`
	rm -f `find . -name '*.class' -print`

batch:
	rm -f $(BATCH_LIB);
	echo '@REM ===============================================================' > $(BATCH_LIB)
	echo '@REM =           Generated by JADE Makefile. DO NOT EDIT           =' >> $(BATCH_LIB)
	echo '@REM ===============================================================' >> $(BATCH_LIB)
	echo >> $(BATCH_LIB)
	echo 'cd $(subst /,\,$(subst $(ROOTDIR),.,$(CLSDIR)))' >> $(BATCH_LIB)
	echo '$(AR) $(ARFLAGS) ..\lib\$(LIBTOOLSNAME) jade\tools' >> $(BATCH_LIB)
	echo 'rmdir /S /Q jade\tools' >> $(BATCH_LIB) # For Win NT 4
	echo 'deltree /Y jade\tools' >> $(BATCH_LIB)  # For Win 95/98
	echo >> $(BATCH_LIB)
	echo '$(AR) $(ARFLAGS) ..\lib\$(LIBNAME) *.class jade' >> $(BATCH_LIB)
	echo 'rmdir /S /Q  jade' >> $(BATCH_LIB) # For Win NT 4
	echo 'deltree /Y  jade' >> $(BATCH_LIB)  # For Win 95/98
	echo 'del *.class' >> $(BATCH_LIB)
	echo >> $(BATCH_LIB)
	echo '$(AR) $(ARFLAGS) ..\lib\$(LIBBASE64NAME) starlight' >> $(BATCH_LIB)
	echo 'rmdir /S /Q starlight' >> $(BATCH_LIB) # For NT 4
	echo 'deltree /Y starlight' >> $(BATCH_LIB)  # For Win 95/98
	echo 'cd ..' >> $(BATCH_LIB)
	echo 'del $(subst /,\,$(subst $(ROOTDIR),.,$(LIBDIR)))\$(LIBTOOLSNAME)' >> $(BATCH_CLEAN)
	echo 'del $(subst /,\,$(subst $(ROOTDIR),.,$(LIBDIR)))\$(LIBNAME)' >> $(BATCH_CLEAN)
	echo 'del $(subst /,\,$(subst $(ROOTDIR),.,$(LIBDIR)))\$(LIBBASE64NAME)' >> $(BATCH_CLEAN)


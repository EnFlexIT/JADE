# Makefile for JADE project - 'doc' directory

DOC = javadoc -sourcepath $(SRCDIR)

DOC_MAIN = $(SRCDIR)/jade-main.html
DOC_OUTDIR = $(DOCDIR)/api
DOC_WINTITLE = "$(PACKAGE) $(VERSION) API Reference"

API_PACKAGES = jade jade.core jade.core.behaviours jade.lang jade.lang.acl jade.lang.sl jade.domain jade.domain.FIPAAgentManagement jade.domain.JADEAgentManagement jade.proto jade.onto jade.onto.basic jade.gui jade.mtp jade.mtp.iiop jade.onto.JADEMetaOntology

API_FLAGS = -d $(DOC_OUTDIR) -overview $(DOC_MAIN) -author -windowtitle $(DOC_WINTITLE)

SNIFFER_OUTDIR = $(DOCDIR)/tools/sniffer/html/jdoc
SNIFFER_FLAGS =  -d $(SNIFFER_OUTDIR) -author -windowtitle "$(PACKAGE) $(VERSION) Sniffer Reference"
SNIFFER_PACKAGES = jade.tools.sniffer

.PHONY: all clean api tools sniffer batch

all: api tools

api: $(DOC_OUTDIR)
	$(DOC) $(API_FLAGS) $(API_PACKAGES)

$(DOC_OUTDIR):
	mkdir -p $(DOC_OUTDIR)

tools: sniffer

sniffer: $(SNIFFER_OUTDIR)
	$(DOC) $(SNIFFER_FLAGS) $(SNIFFER_PACKAGES)

$(SNIFFER_OUTDIR):
	mkdir -p $(SNIFFER_OUTDIR)

clean:

	rm -fr $(DOC_OUTDIR)/[a-z]*
	rm -fr $(SNIFFER_OUTDIR)/[a-z]*

batch: $(DOC_OUTDIR) $(SNIFFER_OUTDIR)
	rm -f $(BATCH_DOC);
	echo '@REM ===============================================================' > $(BATCH_DOC)
	echo '@REM =           Generated by JADE Makefile. DO NOT EDIT           =' >> $(BATCH_DOC)
	echo '@REM ===============================================================' >> $(BATCH_DOC)
	echo >> $(BATCH_DOC)
	echo '$(subst /,\,$(subst $(ROOTDIR),.,$(DOC))) $(subst /,\,$(subst $(ROOTDIR),.,$(API_FLAGS))) $(API_PACKAGES)' >> $(BATCH_DOC)
	echo >> $(BATCH_DOC)
	echo '$(subst /,\,$(subst $(ROOTDIR),.,$(DOC))) $(subst /,\,$(subst $(ROOTDIR),.,$(SNIFFER_FLAGS))) $(SNIFFER_PACKAGES)' >> $(BATCH_DOC)
	echo >> $(BATCH_DOC)
	echo 'del $(subst /,\,$(subst $(ROOTDIR),.,$(DOC_OUTDIR)))\*.html' >> $(BATCH_CLEAN)
	echo 'del $(subst /,\,$(subst $(ROOTDIR),.,$(DOC_OUTDIR)))\*.css' >> $(BATCH_CLEAN)
	echo 'del $(subst /,\,$(subst $(ROOTDIR),.,$(DOC_OUTDIR)))\*.' >> $(BATCH_CLEAN)
	echo 'rmdir /S /Q $(subst /,\,$(subst $(ROOTDIR),.,$(DOC_OUTDIR)))\jade' >> $(BATCH_CLEAN) # For Win NT
	echo 'deltree /Y $(subst /,\,$(subst $(ROOTDIR),.,$(DOC_OUTDIR)))\jade' >> $(BATCH_CLEAN)  # For Win 95/98
	echo 'del $(subst /,\,$(subst $(ROOTDIR),.,$(SNIFFER_OUTDIR)))\*.html' >> $(BATCH_CLEAN)
	echo 'del $(subst /,\,$(subst $(ROOTDIR),.,$(SNIFFER_OUTDIR)))\*.css' >> $(BATCH_CLEAN)
	echo 'del $(subst /,\,$(subst $(ROOTDIR),.,$(SNIFFER_OUTDIR)))\*.' >> $(BATCH_CLEAN)
	echo 'rmdir /S /Q $(subst /,\,$(subst $(ROOTDIR),.,$(SNIFFER_OUTDIR)))\jade' >> $(BATCH_CLEAN) # For Win NT
	echo 'deltree /Y $(subst /,\,$(subst $(ROOTDIR),.,$(SNIFFER_OUTDIR)))\jade' >> $(BATCH_CLEAN)  # For Win 95/98

